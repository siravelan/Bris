app.controller("weatherCtrl",["$http","$scope","$window","$location","$routeParams",function(l,e,q,h,g){var b=this;e.master.data=[];b.timezone=-((new Date).getTimezoneOffset()/60);b.rawdata=[];for(var a in e.master.recents)e.master.recents.hasOwnProperty(a)&&18E5<Date.now()-e.master.recents[a].info.savedAt&&navigator.onLine&&delete e.master.recents[a];if(e.master.recents.hasOwnProperty(h.path()))e.master.location=e.master.recents[h.path()].info.location,e.master.data=e.master.recents[h.path()].data;
else{var t=function(){e.master.location=e.master.textData.yourApproxPosition;l.get("https://real-timer-server.tk:2087/ip-data.php").success(function(b){r({coords:{latitude:b.lat,longitude:b.lon}})})},r=function(a){a="https://real-timer-server.tk:2087/get-weather.php?lat="+a.coords.latitude+"&long="+a.coords.longitude+"&gmt="+b.timezone+"&d="+Math.round(Date.now()/18E5);l.get(a).success(function(a){Array.prototype.push.apply(b.rawdata,a.data);a=[];for(var f=0;f<b.rawdata.length;f++){var k=b.rawdata[f].icon;
b.rawdata[f].offset=!1;b.rawdata[f].showImg=!0;if(/^[\d]+$/.test(k))b.rawdata[f].background="",b.rawdata[f].foreground="src/img/modern-icons/"+k+".png";else if(/^\d+d$/.test(k))"01d"==k?(b.rawdata[f].background="",b.rawdata[f].foreground="src/img/modern-icons/01db.png"):"02d"==k?(b.rawdata[f].background="src/img/modern-icons/01db.png",b.rawdata[f].foreground="src/img/modern-icons/02f.png"):(b.rawdata[f].background="src/img/modern-icons/db.png",b.rawdata[f].foreground="src/img/modern-icons/"+k.substring(0,
2)+"f.png");else if(/^\d+m$/.test(k))b.rawdata[f].background="01m"==k?"src/img/modern-icons/01mb.png":"src/img/modern-icons/mb.png",b.rawdata[f].foreground="src/img/modern-icons/"+k.substring(0,2)+"f.png";else if(/^mf\/\d+n\.\d+$/.test(k)){var g=k.substring(7,9);/^mf\/0[12]n\.\d{2}$/.test(k)||(b.rawdata[f].offset=!0);b.rawdata[f].phase=50>=g?.5*-g:25-.5*(g-50);"01"===k.substring(3,5)?b.rawdata[f].showImg=!1:b.rawdata[f].foreground="src/img/modern-icons/"+k.substring(3,5)+"f.png"}k=Number(b.rawdata[f].date);
"undefined"===typeof a[k]&&(a[k]=[]);a[k].push(b.rawdata[f])}f=[];k=(new Date).getUTCDate();g=(new Date((new Date).getFullYear(),(new Date).getUTCMonth(),0)).getDate();for(var l=k;l<k+g;l++){var c=l>g?l-g:l;if("undefined"!==typeof a[c]){var d={data:[]};if(4<a[c].length){for(var m=0;m<a[c].length;m++){var n=Number(a[c][m].hour);n=6>n?0:12>n?1:18>n?2:3;"undefined"===typeof d.data[n]&&(d.data[n]={data:[]});d.data[n].data.push(a[c][m])}d.data.clean();for(c=0;c<d.data.length;c++){m=d.data[c].data[0];n=
d.data[c].data.slice(-1)[0];d.data[c].hour=m.hour;d.data[c].hourTo=n.hour;d.data[c].background=m.background;d.data[c].foreground=m.foreground;d.data[c].icon=m.icon;d.data[c].offset=m.offset;d.data[c].phase=m.phase;d.data[c].summarizeable=!0;d.data[c].currently_summarized=!0;for(var u=n=m=0,p=0;p<d.data[c].data.length;p++)m+=Number(d.data[c].data[p].degs),n+=Number(d.data[c].data[p].precipitation),u+=Number(d.data[c].data[p].wind);d.data[c].degs=Math.round(m/d.data[c].data.length);d.data[c].precipitation=
Math.round(100*n)/100;d.data[c].wind=Math.round(u/d.data[c].data.length)}c=(new Date(1E3*d.data[0].data[0].unix)).getDay();d.day=e.master.textData.weekdays[0<c?c-1:6]}else{d.data=a[c];for(c=0;c<d.data.length;c++)d.data[c].data=[],d.data[c].summarizeable=!1,d.data[c].currently_summarized=!0;c=(new Date(1E3*d.data[0].unix)).getDay()}d.day=e.master.textData.weekdays[0<c?c-1:6];f.push(d)}}e.master.data=f;e.master.recents[h.path()]={data:f,info:{url:h.path(),location:e.master.location,savedAt:Date.now()}};
"undefined"!==typeof Storage&&(localStorage.recents=JSON.stringify(e.master.recents))}).error(function(a,b){t()})};a=function(){e.master.location=g.place;l.get("https://real-timer-server.tk:2087/get-coordinates.php?input="+encodeURIComponent(g.place)).success(function(a){r({coords:{latitude:a.results[0].geometry.location.lat,longitude:a.results[0].geometry.location.lng}})})};("undefined"===typeof Storage||"undefined"!==typeof Storage&&"true"!=localStorage.hideFlipDeviceTip)&&515>=window.innerWidth&&
(e.master.hideFlipDeviceTip=!1);3<h.path().length?a():navigator.geolocation?(e.master.location=e.master.textData.yourExactPosition,navigator.geolocation.getCurrentPosition(r,t)):t()}angular.element(q).on("resize",function(){e.$apply(function(){e.master.height=window.innerHeight;e.master.width=window.innerWidth;515<e.master.width&&(e.master.hideFlipDeviceTip=!0,"undefined"!==typeof Storage&&(localStorage.hideFlipDeviceTip=!0))})});"undefined"!==typeof Storage&&(localStorage.visits=Number(localStorage.visits||
0)+1);Array.prototype.clean=function(a){for(var b=0;b<this.length;b++)this[b]==a&&(this.splice(b,1),b--);return this}}]);app.controller("searchController",["$http","$scope","$q","$sce",function(l,e,q,h){var g=this;g.query="";g.matches=[];g.error=!1;g.search=function(){l.get("https://real-timer-server.tk:2087/place-search.php?input="+g.query).success(function(b){console.log(b);g.matches=b.predictions;for(b=0;b<g.matches.length;b++){var a=g.matches[b].terms[g.matches[b].terms.length-1].value;"United States"==a&&(a="usa");"Iran"==a&&(a="irn");"United Kingdom"==a&&(a="gbr");"Germany"==a&&(a="deu");"Spain"==a&&(a="esp");
"Malaysia"==a&&(a="mys");"Malta"==a&&(a="mlt");"United Arab Emirates"==a&&(a="are");"Japan"==a&&(a="jpn");"Denmark"==a&&(a="dnk");"Philippines"==a&&(a="phl");g.matches[b].country=a.substr(0,3).toLowerCase()}})}}]);app.controller("cookieCtrl",["$timeout","$scope",function(l,e){function q(e,b){return(b=document.cookie.match("(^|;)\\s*"+e+"\\s*=\\s*([^;]+)"))?b.pop():""}var h=this;h.elem=document.getElementsByClassName("cookie-box")[0];h.template="";h.close=function(){h.elem=document.getElementsByClassName("cookie-box")[0];try{h.elem.setAttribute("style","opacity:0;")}catch(g){console.warn(g)}"undefined"!==typeof Storage?localStorage.cookieAccept="true":document.cookie="cookiescriptaccept=visit";l(function(){h.elem&&
h.elem.parentNode.removeChild(h.elem)},500)};"undefined"!==typeof Storage&&"true"!=localStorage.cookieAccept&&"visit"!=q("cookiescriptaccept")?l(function(){h.elem=document.getElementsByClassName("cookie-box")[0];h.elem.setAttribute("style","opacity:1;");l(h.close,5E3)},2500):h.elem&&h.elem.parentNode.removeChild(h.elem)}]);