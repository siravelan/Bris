DirectoryIndex index.html

RewriteEngine on

#RewriteCond %{HTTP_HOST} ^bris.tk [NC]
#RewriteRule ^(.*)$ https://www.bris.tk/$1 [L,R=301,NC]

# Don't rewrite files or directories
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]

# Rewrite everything else to index.html to allow html5 state links
RewriteRule ^ index.html [L]

# Turn on Expires and set default expires to 3 days
ExpiresActive On
ExpiresDefault A259200

# Set up 400-dagers caching on visse files
<FilesMatch "\.(ico|pdf|flv|ttf|eot|woff|woff2)$">
  ExpiresDefault A34560000
  Header append Cache-Control "public"
</FilesMatch>

# Set up 40-dagers caching on media files
<FilesMatch "\.(gif|jpg|jpeg|png|swf|mov|mp3|wmv|ppt|svg)$">
  ExpiresDefault A3456000
  Header append Cache-Control "public"
</FilesMatch>

# Set up 14-dagers caching on commonly updated files
<FilesMatch "\.(php|js)$">
  ExpiresDefault A1209600
  Header append Cache-Control "private, must-revalidate"
</FilesMatch>

# Set up 4-dagers caching on commonly updated files
<FilesMatch "\.(xml|txt|html|css)$">
  ExpiresDefault A345600
  Header append Cache-Control "private, must-revalidate"
</FilesMatch>

# Set up 1-dagers caching for .json-filer
<FilesMatch "\.(json)$">
  ExpiresDefault A5
  Header append Cache-Control "public, must-revalidate"
</FilesMatch>

# Set up a week caching of index.html
<FilesMatch "index.html">
  ExpiresDefault A604800
  Header append Cache-Control "public"
</FilesMatch>

# Gzipping
AddOutputFilterByType DEFLATE text/plain
AddOutputFilterByType DEFLATE text/html
AddOutputFilterByType DEFLATE text/xml
AddOutputFilterByType DEFLATE text/css
AddOutputFilterByType DEFLATE image/svg+xml
AddOutputFilterByType DEFLATE application/xml
AddOutputFilterByType DEFLATE application/xhtml+xml
AddOutputFilterByType DEFLATE application/rss+xml
AddOutputFilterByType DEFLATE application/javascript
AddOutputFilterByType DEFLATE application/x-javascript
